replicaCount: 1
name: mediator-service

image:
  repository: node-654e3bca7fbeeed18f81d7c7.ps-xaas.io/pcm
  name: aries-mediator-service
  # -- Image tag
  # Uses .Chart.AppVersion if empty
  tag: "0.8.2"
  # -- Image sha, usually generated by the CI
  # Uses image.tag if empty
  #sha: ""
  # -- Image pull policy
  pullPolicy: Always
  # -- Image pull secret when internal image is used
  pullSecrets: regcred

podAnnotations: {}

resources:
  # requests:
  #   cpu: 25m
  #   memory: 64Mi
  # limits:
  #   cpu: 150m
  #   memory: 128Mi

server:
  http:
    port: 3000

ingress:
  enabled: true
  annotations:
    acme.cert-manager.io/http01-edit-in-place: "true"
    #cert-manager.io/issuer: {lets encrypt issuer name}
    nginx.org/websocket-services: "aries-mediator-service"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "3600"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "3600"
    nginx.ingress.kubernetes.io/rewrite-target: /$2
    nginx.ingress.kubernetes.io/use-regex: "true"
    nginx.ingress.kubernetes.io/secure-backends: "true"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.org/websocket-services: "aries-mediator-service"

  hosts:
    - host: mediator.xfsc.stackable.tech
      paths:
        - path: /mediator(/|$)(.*)
          port: 3000
    - host: mediator.xfsc.stackable.tech
      paths:
        - path: /mediator(/|$)(.*)
          port: 3001
  tls:
    - secretName: aries-mediator-service-tls
      hosts:
        - mediator.xfsc.stackable.tech

security:
  runAsNonRoot: false
  runAsUid: 1000
  runAsGid: 1000
config:
  acapywalletkey: 935e5171191eee6b8ea8f9f38417a13e1c872f1f487889f577a832bb236eac38
  label: XFSC-Mediator
  url: mediator.xfsc.stackable.tech/mediator
  mediatoragentadminapikey: 935e5171191eee6b8ea8f9f38417a13e1c872f1f487889f577a832bb236eac38
  mediatorcontrolleradminapikey: 935e5171191eee6b8ea8f9f38417a13e1c872f1f487889f577a832bb236eac38
  postgres:
    host: mediator-postgres.xfsc.stackable.tech
    port: "5432"
    password:
      key: postgres-password
      name: postgres-dev
    super_password:
      key: postgres-password
      name: postgres-dev
    user: postgres
    super_user: postgres
    schema: DatabasePerWallet

